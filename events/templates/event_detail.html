{% extends 'base.html' %}

{% block content %}
    <h1>{{ event.title }}</h1>

    {% if event.description %}
        <p><strong>Description:</strong> {{ event.description }}</p>
    {% endif %}

    <p><strong>Date:</strong> {{ event.start_date }}
        {% if event.end_date %}
            - {{ event.end_date }}
        {% endif %}
    </p>

    <p><strong>Time:</strong> {{ event.start_time }}
        {% if event.end_time %}
            - {{ event.end_time }}
        {% endif %}
    </p>
    <p>Number of Participants: {{ participants }}</p>

    <p><strong>Payment Type:</strong> {{ event.get_payment_type_display }}</p>

    {% if event.payment_amount %}
        <p><strong>Payment Amount:</strong> {{ event.payment_amount }}</p>
    {% endif %}

    {% if event.image %}
        <p><strong>Image:</strong></p>
        <img src="{{ event.image.url }}" alt="{{ event.title }}" style="max-width: 100%; height: auto;">
    {% endif %}

    {% if event.video %}
        <p><strong>Video:</strong></p>
        <video controls style="max-width: 100%; height: auto;">
            <source src="{{ event.video.url }}" type="{{ event.video.file.content_type }}">
            Your browser does not support the video tag.
        </video>
    {% endif %}


    {% if user.is_authenticated %}
        <form method="post" action="{% url 'add_to_cart' event.id %}">
            {% csrf_token %}
            <button type="submit">Add to Cart</button>
        </form>
    {% else %}
        <p><a href="{% url 'login' %}">Log in</a> to add this event to your cart.</p>
    {% endif %}
    {% if user == event.creator %}
        <form action="{% url 'delete_event' event.id %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger">Delete Event</button>
        </form>
    {% endif %}

{% endblock %}
